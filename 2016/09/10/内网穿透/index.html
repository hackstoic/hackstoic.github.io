<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="viewpoint from a programmer, think like a life hacker."><title>内网穿透 | Hackstoic's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">内网穿透</h1><a id="logo" href="/.">Hackstoic's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">内网穿透</h1><div class="post-meta">Sep 10, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>由于开发Web项目，经常需要将本地部署的网站让外网能直接访问到，最便捷的做法当然是在ADSL路由器上直接做端口映射，很不幸大部分运营商都屏蔽了80等常用端口，曾经的做法是在公网一台VPS上架设OpenVPN，将笔记本和VPS连到一个虚拟局域网，再用iptables做端口转发来达到目的，虽然可行，但速度比较慢，由于线路不稳定造成掉线几率较高。偶然发现还有个叫ngrok的神器专门做了这件事，不但提供了一个在外网能够安全的访问内网Web主机，还能捕获所有请求的http内容，方便调试，甚至还支持tcp层端口映射，不局限于某一特定的服务。支持Mac OS X，Linux，Windows平台。</p>
<p><a href="http://www.ngrok.cc/index.php" target="_blank" rel="external">http://www.ngrok.cc/index.php</a> </p>
<p>应用场景<br>在本机开发好的网站想让客户测试不再需要上传到服务器上面，使用本站服务轻松解决，仅需一条命令；微信开发也不需要再上传到服务器，本站服务器帮您解决80端口问题，实现微信服务器直接访问到您本机的web服务。<br>国内使用 ngrok，最好使用国内的服务器，推荐一个 ngrok-sunny，这是一个基于ngrok构建的免费忘了服务。 </p>
<p><img src="./_image/2016-09-10 15-44-56.jpg" alt=""><br>WEB开发<br>在您电脑的web服务直接开放给外网，再也不担心没有路由器权限和80端口被营运商封闭了</p>
<p><img src="./_image/2016-09-10 21-34-27.jpg" alt=""><br>微信开发<br>解决本地80端口无法访问，不需要重复的进行文件上传到服务器，节省大量的上传时间，基于本地写完代码就可以通过微信调试</p>
<p><img src="./_image/2016-09-10 21-34-49.jpg" alt=""><br>tcp端口转发<br>不仅实现了http服务的端口转发同时支持tcp的端口，由于服务器端口有限，有时候可能会不成功。</p>
<p>下载客户端使用</p>
<ol>
<li>2.0版客户端：<br>  Linux 32Bit版本<br>  Linux 64Bit版本<br>  Linux ARM版本<br>  Mac OSX 32Bit版本<br>  Mac OSX 64Bit版本<br>  Win 32Bit版本<br>  Win 64Bit版本<br>  上面链接下载不了请到网盘下载：<a href="https://yunpan.cn/cM9tHRfquWYng" target="_blank" rel="external">https://yunpan.cn/cM9tHRfquWYng</a> （提取码：f63b）</li>
<li>运行客户端命令<br>Linux：./sunny clientid 客户端id。 启动多个客户端id ./sunny clientid 客户端id1,客户端id2<br>Windows：执行《Sunny-Ngrok启动工具.bat》输入客户端id即可</li>
</ol>
<p>这里的client id 可以从后台拿到<br><a href="http://www.ngrok.cc/index.php/Tunnel/index.html" target="_blank" rel="external">http://www.ngrok.cc/index.php/Tunnel/index.html</a><br>隧道管理 － 新增隧道<br>建立一个映射后， 就能拿到client id<br><img src="./_image/2016-09-10 21-36-38.jpg" alt=""></p>
<p>启动后</p>
<blockquote>
<p>Tunnel Status                 online<br>Version                       1.6/1.5<br>Forwarding                    <a href="http://steven-mbp.ngrok.com" target="_blank" rel="external">http://steven-mbp.ngrok.com</a> -&gt; 127.0.0.1:8080<br>Forwarding                    <a href="https://steven-mbp.ngrok.com" target="_blank" rel="external">https://steven-mbp.ngrok.com</a> -&gt; 127.0.0.1:8080<br>Web Interface                 127.0.0.1:4040<br># Conn                        16<br>Avg Conn Time                 558ms</p>
</blockquote>
<p>这里显示映射到本机的8080端口，所以我们的程序也需要监听8080端口。</p>
<ol>
<li>观看视频教程<br><a href="http://www.tudou.com/programs/view/iazA7R9WrT0" target="_blank" rel="external">http://www.tudou.com/programs/view/iazA7R9WrT0</a> </li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/09/10/内网穿透/" data-id="cit8piwru000f7t3hi3ausxgw" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/09/16/上海 Qcon 2016  值得关注的技术(完整版)/" class="pre">2016 上海 Qcon 值得关注的技术</a><a href="/2016/09/06/kubernetes初探/" class="next">kubernetes初探</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/上海Qcon 2016 值得关注的技术(精简版)/">2016 上海Qcon 值得关注的技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/上海 Qcon 2016  值得关注的技术(完整版)/">2016 上海 Qcon 值得关注的技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/10/内网穿透/">内网穿透</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/kubernetes初探/">kubernetes初探</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/28/0gopher meetup 深圳站2016-08-28/">gopher meetup 深圳站2016-08-28</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/开源web堡垒机GateOne初探（2）/">开源web堡垒机GateOne初探（2）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/开源web堡垒机GateOne初探（1）/">开源web堡垒机GateOne初探（1）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/搭建NGINX+UWSGI+DJANGO+MYSQL环境/">搭建NGINX+UWSGI+DJANGO+MYSQL环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/个人博客建设之路/">个人网站建设之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/数据分析遐想/">数据分析遐想</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://coolshell.cn/" title="酷壳" target="_blank">酷壳</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Hackstoic's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>